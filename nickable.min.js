!function(){NodeList.prototype.forEach||(NodeList.prototype.forEach=function(a,b){var f,c=this,d=c.length,e=b?b:void 0;for(f=0;f<d;f+=1)c.hasOwnProperty(f)&&a.call(e,c[f],f,c)});var a=function(a,b){return this.area=document.querySelectorAll(a),this.opts=b,this.opts.mobile=!!("ontouchstart"in window),this.opts.maintain_position=!!this.opts.maintain_position&&this.opts.maintain_position,console.log(this.opts.mobile),this.events={},this.events.mdown=this.opts.mobile?"touchstart":"mousedown",this.events.mmove=this.opts.mobile?"touchmove":"mousemove",this.events.mup=this.opts.mobile?"touchend":"mouseup",b.allow&&(this.nicks=document.querySelectorAll(b.allow)),this};a.prototype.init=function(){this.add_events()},a.prototype.destroy=function(){},a.prototype.mdown=function(a){var b=a.target;this.woff=b.getClientRects()[0];var c=this.opts.mobile?a.changedTouches[0].pageX-this.woff.left:a.offsetX,d=this.opts.mobile?a.changedTouches[0].pageY-this.woff.top:a.offsetY;this.mousepos={x:c,y:d},this.woff={x:this.woff.left,y:this.woff.top},this.nickpos={x:b.offsetLeft,y:b.offsetTop},this.original_parent=b.parentNode,console.log(c,d),b.parentNode.removeChild(b),b.style.position="fixed",b.style.left=this.woff.x+"px",b.style.top=this.woff.y+"px",b.style.zIndex="99999",document.body.appendChild(b),this.drag_obj=b,this.mmove_bind=this.mmove.bind(this),window.addEventListener(this.events.mmove,this.mmove_bind,!1)},a.prototype.mup=function(a){window.removeEventListener(this.events.mmove,this.mmove_bind,!1),this.drag_obj==a.target&&this.check_drops()},a.prototype.mmove=function(a){var c=this.opts.mobile?a.changedTouches[0].clientX:a.clientX,d=this.opts.mobile?a.changedTouches[0].clientY:a.clientY;this.drag_obj.style.left=c-this.mousepos.x+"px",this.drag_obj.style.top=d-this.mousepos.y+"px";var e=this.drag_obj.getClientRects()[0];this.area.forEach(function(a,c){var d=a.getClientRects()[0];b.contains(e,d)&&d.width>e.width&&d.height>e.height?a.style.webkitBoxShadow="inset 0px 0px 74px 0px rgba(0,0,0,0.75)":a.style.webkitBoxShadow=""})},a.prototype.add_events=function(){var a=this;a.mup_bind=this.mup.bind(this),a.mdown_bind=this.mdown.bind(this),this.nicks.length&&this.nicks.forEach(function(b,c){b.addEventListener(a.events.mdown,a.mdown_bind,!1)}),window.addEventListener(a.events.mup,a.mup_bind,!1)},a.prototype.check_drops=function(){var a=this.drag_obj.getClientRects()[0];a.left=a.left-this.mousepos.x,a.top=a.top-this.mousepos.y;var c=this.drag_obj,d=!1,e=this;if(this.area.forEach(function(f,g){var h=f.getClientRects()[0];b.contains(a,h)&&h.width>a.width&&h.height>a.height&&(c.parentNode.removeChild(c),f.appendChild(c),c.style.position="",e.opts.maintain_position?(c.style.position="absolute",c.style.left=a.left-h.left+"px",c.style.top=a.top-h.top+"px"):(c.style.left="",c.style.top=""),f.style.webkitBoxShadow="",c.removeEventListener(e.events.mdown,e.mdown_bind,!1),e.drag_obj=null,c.style.zIndex="",d=!0)}),!d){c.parentNode.removeChild(c),c.style.position="";var f=this.original_parent.getClientRects()[0];c.style.left=a.left-f.left+"px",c.style.top=a.top-f.top+"px",this.original_parent.appendChild(c),c.style.webkitTransition="all 0.4s linear",setTimeout(function(){c.style.left="",c.style.top=""},10),setTimeout(function(){c.style.webkitTransition="",c.style.zIndex=""},500)}};var b={distance:function(a,b){return b.x||(b.x=0),b.y||(b.y=0),Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))},contains:function(a,b){return a.left>=b.left&&a.left<=b.right&&a.top>=b.top&&a.top<=b.bottom}};window.Nickable=a}();